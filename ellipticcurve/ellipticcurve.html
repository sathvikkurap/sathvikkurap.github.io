<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECDH Key Exchange</title>
    <script>
        async function generateSharedSecret() {
            // Generate key pairs for two parties
            const aliceKeyPair = await crypto.subtle.generateKey({
                name: "ECDH",
                namedCurve: "P-256"
            }, true, ["deriveKey"]);

            const bobKeyPair = await crypto.subtle.generateKey({
                name: "ECDH",
                namedCurve: "P-256"
            }, true, ["deriveKey"]);

            // Export Bob's public key
            const bobPublicKey = await crypto.subtle.exportKey("raw", bobKeyPair.publicKey);

            // Derive shared secret using Alice's private key and Bob's public key
            const sharedSecret = await crypto.subtle.deriveKey({
                name: "ECDH",
                namedCurve: "P-256",
                public: await crypto.subtle.importKey(
                    "raw",
                    bobPublicKey,
                    { name: "ECDH", namedCurve: "P-256" },
                    true,
                    []
                )
            }, aliceKeyPair.privateKey, { name: "AES-GCM", length: 256 }, true, ["encrypt", "decrypt"]);

            console.log('Shared secret generated successfully');
        }
    </script>
</head>
<body>
    <h1>Elliptic Curve Diffie-Hellman Key Exchange</h1>
    <button onclick="generateSharedSecret()">Generate Shared Secret</button>
</body>
</html>
