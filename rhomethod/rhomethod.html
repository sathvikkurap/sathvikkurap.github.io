<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pollard's Rho Algorithm (BigInt)</title>
    <script>
        function gcd(a, b) {
            a = BigInt(a);
            b = BigInt(b);
            while (b !== 0n) {
                let t = b;
                b = a % b;
                a = t;
            }
            return a;
        }

        function abs(n) {
            return n < 0n ? -n : n;
        }

        function pollardRho(n) {
            n = BigInt(n);
            if (n % 2n === 0n) return 2n;

            let x = 2n;
            let y = 2n;
            let d = 1n;

            function f(x) {
                return (x * x + 1n) % n;
            }

            while (d === 1n) {
                x = f(x);
                y = f(f(y));
                d = gcd(abs(x - y), n);
            }

            return d;
        }

        function factor() {
            const input = document.getElementById('number').value;
            let n;
            try {
                n = BigInt(input);
            } catch (e) {
                document.getElementById('result').textContent = "Please enter a valid number.";
                return;
            }

            if (n < 2n) {
                document.getElementById('result').textContent = "Please enter a number greater than 1.";
                return;
            }

            const factor = pollardRho(n);

            if (factor === n) {
                document.getElementById('result').textContent = `${n} is prime or the algorithm failed to find a factor.`;
            } else {
                document.getElementById('result').textContent = `A factor of ${n} is ${factor}.`;
            }
        }
    </script>
</head>
<body>
    <h1>Pollard's Rho Algorithm for Factoring (BigInt)</h1>
    <input type="text" id="number" placeholder="Enter a number to factor">
    <button onclick="factor()">Factor</button>
    <p id="result"></p>
</body>
</html>
